#!/bin/bash

if ! command -v mocp &> /dev/null; then
  exit 0
fi

music='\xf3\xb0\x9d\x9a'   # f075a 󰝚
nomusic='\xf3\xb0\x9d\x9b' # f075b 󰝛

if state="$(mocp -Q %state 2> /dev/null)"; then
  case "$state" in
    PLAY)  state='\\xf3\\xb0\\x8f\\xa4' ;; # f03e4 󰏤
    PAUSE) state='\\xf3\\xb0\\x90\\x8a' ;; # f040a 󰐊
#     STOP)  state='\\xf3\\xb0\\x93\\x9b' ;; # f04db 󰓛
    *) exit 0
  esac
  printf "<action=x-terminal-emulator mocp>$music $(mocp -Q "%a: %t </action><action=mocp -G> $state %ct/%tt</action>" 2> /dev/null) | "
fi
