## Mac specific:
if [ "$OSTYPE" = darwin18 ]; then

  # install iTerm2 https://www.iterm2.com/downloads.html

  # install brew https://brew.sh/
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
  read -p "Press Enter to continue"

  # install xcode
  xcode-select --install
  read -p "Press Enter to continue"

  # install haskell for mac
  open 'https://geo.itunes.apple.com/us/app/haskell/id841285201?mt=12'
  read -p "Press Enter to continue"

  # install nerd fonts https://github.com/ryanoasis/nerd-fonts
  brew tap caskroom/fonts
  brew cask install font-hack-nerd-font

  # install other useful things from brew
  brew install jq lesspipe ffmpeg pcre cabal-install node gnupg python git

  # ghci setup
  cabal update
  cabal install hoogle hlint lambdabot happy pretty-show hscolour ghc-paths hindent doctest stylish-haskell --overwrite-policy=always

  # stack update
  # stack install hoogle hlint lambdabot happy pretty-show hscolour ghc-paths hindent

  # install haskell-language-server https://github.com/haskell/haskell-language-server

  ln -s .gitconfig.mac.pdr .gitconfig
fi

## Debian
if [ "$OSTYPE" = linux-gnu -a "$HOSTTYPE" = x86_64 ]; then
  # apt install sudo  ## ensure pdr in sudo group, add NOPASSWD to that rule with visudo
  sudo apt install bc build-essential haskell-platform hlint locate haskell-platform-doc haskell-platform-prof autoconf automake libtool flex bison gdb fonts-mathjax-extras fonts-stix
  sudo apt install vim-nox curl
  sudo apt purge vim-tiny nano

  # sudo apt install haskell-stack hoogle hlint lambdabot happy bc cabal-install locate
  sudo apt install libpcre2-dev libicu-dev # libncurses-dev libgmp-dev zlib1g-dev # pre-requisites for many things, including haskell-language-server
  cabal update
  cabal install pretty-show hscolour ghc-paths hindent hoogle lambdabot doctest stylish-haskell --overwrite-policy=always

  ln -s .gitconfig.linux.pdr .gitconfig
fi

## Raspberry Pi (Raspbian)
# Add "xserver-command=X -s 0 dpms" into /etc/lightdm/lightdm.conf to disable screen sleeping
# sudo apt install kodi

## Linux Servers
# Disable any attempt to suspend with the following:
# sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target

# If we are a router
# Turn on ip_forwarding in /etc/sysctl.conf

# Install fail2ban if ssh exposed to public
# sudo apt install fail2ban
# echo -e "[DEFAULT]\nbantime = -1\nmaxretry = 2\n" | sudo tee /etc/fail2ban/jail.d/defaults.local
# sudo systemctl restart fail2ban

## Linux Desktops
# Remap keys: capslock -> escape and shift-capslock -> capslock
# For more options: man 7 xkeyboard-config
# In /etc/default/keyboard
# XKBOPTIONS="caps:escape_shifted_capslock"
# Maybe then need to: sudo dpkg-reconfigure keyboard-configuration

## Coding

# install vim-plug (already copied into this repo)
# curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

# install haskell-language-server https://github.com/haskell/haskell-language-server

# install nix via apt
#?? nix-env -i cabal-install hlint goa lambdabot
#?? ~/.nix-profile/bin/cabal update
#?? ~/.nix-profile/bin/cabal install pretty-show hscolour hoogle hindent doctest --overwrite-policy=always
